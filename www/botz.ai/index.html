<!DOCTYPE html>
<html>
  <head>
    <title>A chatgpt experiment</title>
  </head>
  <body>
    <h1>A chatgpt experiment</h1>
	<p>This website and associated microservices were generated by ChatGPT4.   
		While some 'tweaks' were made, about 95% of this is generated code based on a 
		chat conversation thread over a few hours.</p>
		<p>The prompt used to process each article is:<br/>
			<code>Using the html h3 tag for the title, and p tags for each paragraph, write an article on the 
				following news article: ${article.url} with a creative title.  The article should
				capture the key facts and analyse each on it's merits.</code>
		</p>

	<h2>ChatGPT analysis of articles</h2>
    <ul id="article-list"></ul>

    <script>
      // Fetch the list of articles from the API endpoint
      fetch('http://localhost:3000/editorials')
        .then(response => response.json())
        .then(articles => {
          const articleList = document.querySelector('#article-list');

          // Loop through the array of articles and create an <li> element for each one
          articles.forEach(article => {
            const li = document.createElement('li');
            li.innerHTML = `
              <img src="${article.article.urlToImage}" alt="${article.article.title}" width="400px" style="float:right">
			  <p>${article.editorial}"></p>
			  <p>Original author: ${article.article.author} | ${article.article.publishedAt}</p>
			  <p>Original title: ${article.article.title}</p>
              <p><a href="${article.article.url}">Read Original article</a></p>
              <hr>
            `;
            articleList.appendChild(li);
          });
        })
        .catch(error => {
          console.error(error);
          const articleList = document.querySelector('#article-list');
          articleList.innerHTML = '<li>Failed to load articles</li>';
        });
    </script>
  </body>
</html>
